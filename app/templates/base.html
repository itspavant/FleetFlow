<!DOCTYPE html>
<html>
<head>
    <title>FleetFlow</title>
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body>

<div class="container-fluid">
    <div class="row">

        <!-- Sidebar -->
        <div class="col-2 bg-dark text-white vh-100 p-3">
            <h4>FleetFlow</h4>
            <hr>
                <ul class="nav flex-column">

                    <!-- Dashboard visible to all logged users -->
                    <li class="nav-item">
                        <a class="nav-link text-white"
                        href="{{ url_for('dashboard.home') }}">
                            Dashboard
                        </a>
                    </li>

                    <!-- Vehicles (Manager only) -->
                    {% if current_user.role.name == "MANAGER" %}
                    <li class="nav-item">
                        <a class="nav-link text-white"
                        href="{{ url_for('vehicles.list_vehicles') }}">
                            Vehicles
                        </a>
                    </li>
                    {% endif %}

                    <!-- Drivers (Manager + Safety Officer + Dispatcher) -->
                    {% if current_user.role.name in ["MANAGER", "SAFETY_OFFICER", "DISPATCHER"] %}
                    <li class="nav-item">
                        <a class="nav-link text-white"
                        href="{{ url_for('drivers.list_drivers') }}">
                            Drivers
                        </a>
                    </li>
                    {% endif %}

                    <!-- Trips (Manager + Dispatcher) -->
                    {% if current_user.role.name in ["MANAGER", "DISPATCHER"] %}
                    <li class="nav-item">
                        <a class="nav-link text-white"
                        href="{{ url_for('trips.list_trips') }}">
                            Trips
                        </a>
                    </li>
                    {% endif %}

                    <!-- Maintenance (Manager + Safety Officer) -->
                    {% if current_user.role.name in ["MANAGER", "SAFETY_OFFICER"] %}
                    <li class="nav-item">
                        <a class="nav-link text-white"
                        href="{{ url_for('maintenance.list_maintenance') }}">
                            Maintenance
                        </a>
                    </li>
                    {% endif %}

                    <!-- Analytics (Manager + Analyst) -->
                    {% if current_user.role.name in ["MANAGER", "ANALYST"] %}
                    <li class="nav-item">
                        <a class="nav-link text-white"
                        href="{{ url_for('analytics.view_analytics') }}">
                            Analytics
                        </a>
                    </li>
                    {% endif %}
                </ul>
        </div>

        <!-- Main Content -->
        <div class="col-10 p-4">
                {% with messages = get_flashed_messages() %}
                {% if messages %}
                    {% for message in messages %}
                    <div class="alert alert-info">
                        {{ message }}
                    </div>
                    {% endfor %}
                {% endif %}
                {% endwith %}            
            {% block content %}{% endblock %}
        </div>

    </div>
</div>

</body>
</html>